<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>[PSR]Hunt: main</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = '../../open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = '../../closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">[PSR]Hunt</div>
   <div id="projectbrief">ReengineeringHuntLegacyCode</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d1/d56/driver_8c.html','../../');
</script>
<div id="doc-content">
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a9ce341dec926f6a7573eba1e6d8643dc.html#a9ce341dec926f6a7573eba1e6d8643dc">__RCSID</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_aae2e7e519abf813fe25bc007036ddda6.html#aae2e7e519abf813fe25bc007036ddda6">checkdam</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a4b091a83b7f22e8eef5cbc508dc42c3c.html#a4b091a83b7f22e8eef5cbc508dc42c3c">cleanup</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a6de5fcb80a9ac87307617c9ade91baca.html#a6de5fcb80a9ac87307617c9ade91baca">clear_scores</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_aaf1dd5a96b4d9b41354d804b1291e1e4.html#aaf1dd5a96b4d9b41354d804b1291e1e4">Daemon</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a9361b98a81e3ec4dd27524d829a81cea.html#a9361b98a81e3ec4dd27524d829a81cea">DAEMON_SIZE</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a50a87a4c56e9a0d10f7958884a811d8c.html#a50a87a4c56e9a0d10f7958884a811d8c">erred</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a04a99c9869cd27c25c13214e72692243.html#a04a99c9869cd27c25c13214e72692243">First_arg</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a6c56abdf0dfe0c8005721cb7789a1e18.html#a6c56abdf0dfe0c8005721cb7789a1e18">havechar</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_aedc913c139bb562646d3459b0ca28997.html#aedc913c139bb562646d3459b0ca28997">init</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_aa884cf292c6811a6c80193e99dccb564.html#aa884cf292c6811a6c80193e99dccb564">Last_arg</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="../../d1/d56/driver_8c_a7f567e72b4713406998c6192bb2a10e7.html#a7f567e72b4713406998c6192bb2a10e7">main</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a3ceaa6a27b22d03cd0c0c5f2e6aea440.html#a3ceaa6a27b22d03cd0c0c5f2e6aea440">rand_num</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_acce0d4c4425d3def3d8448f8734aa370.html#acce0d4c4425d3def3d8448f8734aa370">RN</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a70289ec91e5e8f962999b12669dd5d34.html#a70289ec91e5e8f962999b12669dd5d34">Seed</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_a672cd0bcc9dab44e118915d40fdc32b1.html#a672cd0bcc9dab44e118915d40fdc32b1">send_stats</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d56/driver_8c_ab1580719e83adabac7a47e7de5f20e14.html#ab1580719e83adabac7a47e7de5f20e14">zap</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top">
<a class="anchor" id="a7f567e72b4713406998c6192bb2a10e7"></a><!-- doxytag: member="driver.c::main" ref="a7f567e72b4713406998c6192bb2a10e7" args="(int argc, char *argv[], char *env[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>env</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The main program. </p>

<p>Definition at line <a class="el" href="../../d1/d56/driver_8c_source.html#l00089">89</a> of file <a class="el" href="../../d1/d56/driver_8c_source.html">driver.c</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
        PLAYER *pp;
<span class="preprocessor">#ifdef INTERNET</span>
<span class="preprocessor"></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> msg; <span class="comment">/* Changed from u_short. [PSR] */</span>
        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> reply; <span class="comment">/* Changed from u_short. [PSR] */</span>
        <span class="comment">/*</span>
<span class="comment">         Edited namelen declaration type in order to match recvfrom() parameter. [PSR]</span>
<span class="comment">         */</span>
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> namelen; <span class="comment">/* Changed from int. [PSR] */</span>
        SOCKET test;
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>        <span class="keyword">static</span> <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;
        <span class="keyword">static</span> <span class="keywordtype">bool</span> server = <span class="keyword">false</span>;
        <span class="keywordtype">int</span> c, i;
        <span class="keyword">const</span> <span class="keywordtype">int</span> linger = 90 * 1000;

        <a class="code" href="../../d1/d56/driver_8c_a04a99c9869cd27c25c13214e72692243.html#a04a99c9869cd27c25c13214e72692243" title="Pointer to argv[0].">First_arg</a> = argv[0];
        <span class="keywordflow">if</span> (env == NULL || *env == NULL) {
                env = argv + argc;
        }
        <span class="keywordflow">while</span> (*env) {
                env++;
        }
        <a class="code" href="../../d1/d56/driver_8c_aa884cf292c6811a6c80193e99dccb564.html#aa884cf292c6811a6c80193e99dccb564" title="Pointer to end of argv/environ.">Last_arg</a> = env[-1] + strlen(env[-1]);

        <span class="keywordflow">while</span> ((c = getopt(argc, argv, <span class="stringliteral">&quot;sp:P:&quot;</span>)) != -1) {
                <span class="keywordflow">switch</span> (c) {
                <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:
                        server = <span class="keyword">true</span>;
                        <span class="keywordflow">break</span>;
<span class="preprocessor"># ifdef INTERNET</span>
<span class="preprocessor"></span>                        <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:
                        standard_port = <span class="keyword">false</span>;
                        Test_port = atoi(optarg);
                        <span class="keywordflow">break</span>;
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                <span class="keywordflow">default</span>:
                        <a class="code" href="../../d1/d56/driver_8c_a50a87a4c56e9a0d10f7958884a811d8c.html#a50a87a4c56e9a0d10f7958884a811d8c" title="Prints on stderr the usage of the function.">erred</a>(argv);
                        <span class="keywordflow">break</span>;
                }
        }
        <span class="keywordflow">if</span> (optind &lt; argc) {
                <a class="code" href="../../d1/d56/driver_8c_a50a87a4c56e9a0d10f7958884a811d8c.html#a50a87a4c56e9a0d10f7958884a811d8c" title="Prints on stderr the usage of the function.">erred</a>(argv);
        }

        <a class="code" href="../../d1/d56/driver_8c_aedc913c139bb562646d3459b0ca28997.html#aedc913c139bb562646d3459b0ca28997" title="Initialize the global parameters.">init</a>();

        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
                <span class="keywordflow">do</span> {
                        errno = 0;
                        <span class="keywordflow">while</span> (poll(<a class="code" href="../../dc/d2c/extern_8c_a11af15344ece6eeb20ac37e1ce97cbc8.html#a11af15344ece6eeb20ac37e1ce97cbc8" title="A set of file descriptors.">fdset</a>, 3 + MAXPL + MAXMON, INFTIM) &lt; 0) {
                                <span class="keywordflow">if</span> (errno != EINTR)
<span class="preprocessor"># ifdef LOG</span>
<span class="preprocessor"></span>                                        <a class="code" href="../../d3/d91/utils_8c_a9fd9d7a3d52fe2ba7238f5959ce5ce17.html#a9fd9d7a3d52fe2ba7238f5959ce5ce17" title="Reimplements the syslog function in order to avoid the use of m.">iso_syslog</a>(LOG_WARNING, <span class="stringliteral">&quot;select: %m&quot;</span>);
<span class="preprocessor"># else</span>
<span class="preprocessor"></span>                                        warn(<span class="stringliteral">&quot;select&quot;</span>);
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                                errno = 0;
                        }
<span class="preprocessor"># ifdef INTERNET</span>
<span class="preprocessor"></span>                        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2c/extern_8c_a11af15344ece6eeb20ac37e1ce97cbc8.html#a11af15344ece6eeb20ac37e1ce97cbc8" title="A set of file descriptors.">fdset</a>[2].revents &amp; POLLIN) {
                                namelen = <a class="code" href="../../d1/d56/driver_8c_a9361b98a81e3ec4dd27524d829a81cea.html#a9361b98a81e3ec4dd27524d829a81cea" title="Defines the dimension of the daemon.">DAEMON_SIZE</a>;
                                htons(sock_port);
                                (void) recvfrom(Test_socket, (<span class="keywordtype">char</span> *) &amp;msg, <span class="keyword">sizeof</span> msg,
                                                0, (<span class="keyword">struct </span>sockaddr *) &amp;test, &amp;namelen);
                                <span class="keywordflow">switch</span> (ntohs(msg)) {
                                        <span class="keywordflow">case</span> C_MESSAGE:
                                        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2c/extern_8c_a7694030219c7458ab55ba6dd800ceea3.html#a7694030219c7458ab55ba6dd800ceea3" title="Number of players.">Nplayer</a> &lt;= 0) {
                                                <span class="keywordflow">break</span>;
                                        }
                                        reply = htons((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>) <a class="code" href="../../dc/d2c/extern_8c_a7694030219c7458ab55ba6dd800ceea3.html#a7694030219c7458ab55ba6dd800ceea3" title="Number of players.">Nplayer</a>);
                                        (void) sendto(Test_socket, (<span class="keywordtype">char</span> *) &amp;reply,
                                                        <span class="keyword">sizeof</span> reply, 0,
                                                        (<span class="keyword">struct </span>sockaddr *) &amp;test, <a class="code" href="../../d1/d56/driver_8c_a9361b98a81e3ec4dd27524d829a81cea.html#a9361b98a81e3ec4dd27524d829a81cea" title="Defines the dimension of the daemon.">DAEMON_SIZE</a>);
                                        <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> C_SCORES:
                                        reply = htons(stat_port);
                                        (void) sendto(Test_socket, (<span class="keywordtype">char</span> *) &amp;reply,
                                                        <span class="keyword">sizeof</span> reply, 0,
                                                        (<span class="keyword">struct </span>sockaddr *) &amp;test, <a class="code" href="../../d1/d56/driver_8c_a9361b98a81e3ec4dd27524d829a81cea.html#a9361b98a81e3ec4dd27524d829a81cea" title="Defines the dimension of the daemon.">DAEMON_SIZE</a>);
                                        <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> C_PLAYER:
                                        <span class="keywordflow">case</span> C_MONITOR:
                                        <span class="keywordflow">if</span> (msg == C_MONITOR &amp;&amp; <a class="code" href="../../dc/d2c/extern_8c_a7694030219c7458ab55ba6dd800ceea3.html#a7694030219c7458ab55ba6dd800ceea3" title="Number of players.">Nplayer</a> &lt;= 0) {
                                                <span class="keywordflow">break</span>;
                                        }
                                        reply = htons(sock_port);
                                        (void) sendto(Test_socket, (<span class="keywordtype">char</span> *) &amp;reply,
                                                        <span class="keyword">sizeof</span> reply, 0,
                                                        (<span class="keyword">struct </span>sockaddr *) &amp;test, <a class="code" href="../../d1/d56/driver_8c_a9361b98a81e3ec4dd27524d829a81cea.html#a9361b98a81e3ec4dd27524d829a81cea" title="Defines the dimension of the daemon.">DAEMON_SIZE</a>);
                                        <span class="keywordflow">break</span>;
                                }
                        }
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                        {
                                <span class="keywordflow">for</span> (pp = <a class="code" href="../../dc/d2c/extern_8c_a2735f6588064e94812ed34efcd243183.html#a2735f6588064e94812ed34efcd243183" title="All the players.">Player</a>, i = 0; pp &lt; <a class="code" href="../../dc/d2c/extern_8c_af6011c3543e898ef05f36643b68255b7.html#af6011c3543e898ef05f36643b68255b7" title="Last active player slot.">End_player</a>; pp++, i++)
                                        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d56/driver_8c_a6c56abdf0dfe0c8005721cb7789a1e18.html#a6c56abdf0dfe0c8005721cb7789a1e18" title="Check to see if we have any characters in the input queue; if we do, read them, stash them away...">havechar</a>(pp, i + 3)) {
                                                <a class="code" href="../../d7/dd3/execute_8c_a293d6d1e7cae7ed3d97cac0639188beb.html#a293d6d1e7cae7ed3d97cac0639188beb" title="Execute a single command.">execute</a>(pp);
                                                pp-&gt;p_nexec++;
                                        }
<span class="preprocessor"># ifdef MONITOR</span>
<span class="preprocessor"></span>                                <span class="keywordflow">for</span> (pp = Monitor, i = 0; pp &lt; End_monitor; pp++, i++)
                                <span class="keywordflow">if</span> (<a class="code" href="../../d1/d56/driver_8c_a6c56abdf0dfe0c8005721cb7789a1e18.html#a6c56abdf0dfe0c8005721cb7789a1e18" title="Check to see if we have any characters in the input queue; if we do, read them, stash them away...">havechar</a>(pp, i + MAXPL + 3)) {
                                        mon_execute(pp);
                                        pp-&gt;p_nexec++;
                                }
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                                <a class="code" href="../../d4/dab/shots_8c_a0c05674e7ae12fcf2b60a70e5192e1d8.html#a0c05674e7ae12fcf2b60a70e5192e1d8" title="Move the shots already in the air, taking explosions into account.">moveshots</a>();
                                <span class="keywordflow">for</span> (pp = <a class="code" href="../../dc/d2c/extern_8c_a2735f6588064e94812ed34efcd243183.html#a2735f6588064e94812ed34efcd243183" title="All the players.">Player</a>, i = 0; pp &lt; <a class="code" href="../../dc/d2c/extern_8c_af6011c3543e898ef05f36643b68255b7.html#af6011c3543e898ef05f36643b68255b7" title="Last active player slot.">End_player</a>;)
                                        <span class="keywordflow">if</span> (pp-&gt;p_death[0] != <span class="charliteral">&#39;\0&#39;</span>) {
                                                <a class="code" href="../../d1/d56/driver_8c_ab1580719e83adabac7a47e7de5f20e14.html#ab1580719e83adabac7a47e7de5f20e14" title="Kill off a player and take him out of the game.">zap</a>(pp, <span class="keyword">true</span>, i + 3);
                                        } <span class="keywordflow">else</span> {
                                                pp++, i++;
                                        }
<span class="preprocessor"># ifdef MONITOR</span>
<span class="preprocessor"></span>                                <span class="keywordflow">for</span> (pp = Monitor, i = 0; pp &lt; End_monitor; )
                                <span class="keywordflow">if</span> (pp-&gt;p_death[0] != <span class="charliteral">&#39;\0&#39;</span>) {
                                        <a class="code" href="../../d1/d56/driver_8c_ab1580719e83adabac7a47e7de5f20e14.html#ab1580719e83adabac7a47e7de5f20e14" title="Kill off a player and take him out of the game.">zap</a>(pp, <span class="keyword">false</span>, i + MAXPL + 3);
                                }
                                <span class="keywordflow">else</span> {
                                        pp++, i++;
                                }
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                        }
                        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2c/extern_8c_a11af15344ece6eeb20ac37e1ce97cbc8.html#a11af15344ece6eeb20ac37e1ce97cbc8" title="A set of file descriptors.">fdset</a>[0].revents &amp; POLLIN) {
                                <span class="keywordflow">if</span> (<a class="code" href="../../d6/dfd/answer_8c_ad9d4798f47a390f33923cfc52ad74e2d.html#ad9d4798f47a390f33923cfc52ad74e2d" title="Manages the messages submission.">answer</a>()) {
<span class="preprocessor"># ifdef INTERNET</span>
<span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (first &amp;&amp; standard_port) {
                                                <a class="code" href="../../d0/d3e/faketalk_8c_a276404056071774aa4e3697fdd4d4be1.html#a276404056071774aa4e3697fdd4d4be1" title="Query the local SMTP daemon to expand the RENDEZVOUS mailing list and fake a talk request to each add...">faketalk</a>();
                                        }
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                                        first = <span class="keyword">false</span>;
                                }
                        }
                        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2c/extern_8c_a11af15344ece6eeb20ac37e1ce97cbc8.html#a11af15344ece6eeb20ac37e1ce97cbc8" title="A set of file descriptors.">fdset</a>[1].revents &amp; POLLIN) {
                                <a class="code" href="../../d1/d56/driver_8c_a672cd0bcc9dab44e118915d40fdc32b1.html#a672cd0bcc9dab44e118915d40fdc32b1" title="Print stats to requestor.">send_stats</a>();
                        }
                        <span class="keywordflow">for</span> (pp = <a class="code" href="../../dc/d2c/extern_8c_a2735f6588064e94812ed34efcd243183.html#a2735f6588064e94812ed34efcd243183" title="All the players.">Player</a>, i = 0; pp &lt; <a class="code" href="../../dc/d2c/extern_8c_af6011c3543e898ef05f36643b68255b7.html#af6011c3543e898ef05f36643b68255b7" title="Last active player slot.">End_player</a>; pp++, i++) {
                                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2c/extern_8c_a11af15344ece6eeb20ac37e1ce97cbc8.html#a11af15344ece6eeb20ac37e1ce97cbc8" title="A set of file descriptors.">fdset</a>[i + 3].revents &amp; POLLIN) {
                                        <a class="code" href="../../d2/d44/terminal_8c_a6316d9ac413a57de1bd726667506f737.html#a6316d9ac413a57de1bd726667506f737" title="Send a command to the given user.">sendcom</a>(pp, READY, pp-&gt;p_nexec);
                                }
                                pp-&gt;p_nexec = 0;
                                (void) fflush(pp-&gt;p_output);
                        }
<span class="preprocessor"># ifdef MONITOR</span>
<span class="preprocessor"></span>                        <span class="keywordflow">for</span> (pp = Monitor, i = 0; pp &lt; End_monitor; pp++, i++) {
                                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2c/extern_8c_a11af15344ece6eeb20ac37e1ce97cbc8.html#a11af15344ece6eeb20ac37e1ce97cbc8" title="A set of file descriptors.">fdset</a>[i + MAXPL + 3].revents &amp; POLLIN) {
                                        <a class="code" href="../../d2/d44/terminal_8c_a6316d9ac413a57de1bd726667506f737.html#a6316d9ac413a57de1bd726667506f737" title="Send a command to the given user.">sendcom</a>(pp, READY, pp-&gt;p_nexec);
                                }
                                pp-&gt;p_nexec = 0;
                                (void) fflush(pp-&gt;p_output);
                        }
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                } <span class="keywordflow">while</span> (<a class="code" href="../../dc/d2c/extern_8c_a7694030219c7458ab55ba6dd800ceea3.html#a7694030219c7458ab55ba6dd800ceea3" title="Number of players.">Nplayer</a> &gt; 0);

                <span class="keywordflow">if</span> (poll(<a class="code" href="../../dc/d2c/extern_8c_a11af15344ece6eeb20ac37e1ce97cbc8.html#a11af15344ece6eeb20ac37e1ce97cbc8" title="A set of file descriptors.">fdset</a>, 3 + MAXPL + MAXMON, linger) &gt; 0) {
                        <span class="keywordflow">continue</span>;
                }
                <span class="keywordflow">if</span> (server) {
                        <a class="code" href="../../d1/d56/driver_8c_a6de5fcb80a9ac87307617c9ade91baca.html#a6de5fcb80a9ac87307617c9ade91baca" title="Clear out the scores so the next session start clean.">clear_scores</a>();
                        <a class="code" href="../../dc/df0/makemaze_8c_a6b1f7f2491541c9a28669dcfd51151fc.html#a6b1f7f2491541c9a28669dcfd51151fc" title="Builds the maze.">makemaze</a>();
                        <a class="code" href="../../d4/d55/expl_8c_a6ce5305d19977ebe917bff99be1d86c6.html#a6ce5305d19977ebe917bff99be1d86c6" title="Clear out the walls array.">clearwalls</a>();
<span class="preprocessor"># ifdef BOOTS</span>
<span class="preprocessor"></span>                        makeboots();
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>                        first = <span class="keyword">true</span>;
                        <span class="keywordflow">continue</span>;
                }
                <span class="keywordflow">break</span>;
        }

<span class="preprocessor"># ifdef MONITOR</span>
<span class="preprocessor"></span>        <span class="keywordflow">for</span> (pp = Monitor, i = 0; pp &lt; End_monitor; i++) {
                <a class="code" href="../../d1/d56/driver_8c_ab1580719e83adabac7a47e7de5f20e14.html#ab1580719e83adabac7a47e7de5f20e14" title="Kill off a player and take him out of the game.">zap</a>(pp, <span class="keyword">false</span>, i + MAXPL + 3);
        }
<span class="preprocessor"># endif</span>
<span class="preprocessor"></span>        <a class="code" href="../../d1/d56/driver_8c_a4b091a83b7f22e8eef5cbc508dc42c3c.html#a4b091a83b7f22e8eef5cbc508dc42c3c" title="Exit with the given value, cleaning up any droppings lying around.">cleanup</a>(0);
        <span class="comment">/* NOTREACHED */</span>
        <span class="keywordflow">return</span> (0);
}
</pre></div>
</div>
</div>
    </td>
  </tr>
</table>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d1/d56/driver_8c.html">driver.c</a>      </li>
      <li class="footer">Generated on Wed Jul 11 2012 16:15:50 for [PSR]Hunt by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
